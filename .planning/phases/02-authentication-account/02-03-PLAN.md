---
phase: 02-authentication-account
plan: 03
type: execute
wave: 3
depends_on: ["02-01", "02-02"]
files_modified:
  - components/auth/signup-form.tsx
  - components/auth/login-form.tsx
  - app/(auth)/signup/page.tsx
  - app/(auth)/login/page.tsx
  - app/(auth)/verify-email/page.tsx
autonomous: true

must_haves:
  truths:
    - "User can view signup page and submit signup form"
    - "User can view login page and submit login form"
    - "User sees verify-email page after signup"
    - "Validation errors display as toast notifications"
  artifacts:
    - path: "components/auth/signup-form.tsx"
      provides: "Signup form with email, password, confirm password"
      min_lines: 50
    - path: "components/auth/login-form.tsx"
      provides: "Login form with email, password"
      min_lines: 40
    - path: "app/(auth)/signup/page.tsx"
      provides: "Signup page"
    - path: "app/(auth)/login/page.tsx"
      provides: "Login page"
    - path: "app/(auth)/verify-email/page.tsx"
      provides: "Email verification instructions page"
  key_links:
    - from: "components/auth/signup-form.tsx"
      to: "lib/actions/auth.ts"
      via: "signUp server action call"
      pattern: "signUp\\(formData\\)"
    - from: "components/auth/login-form.tsx"
      to: "lib/actions/auth.ts"
      via: "signIn server action call"
      pattern: "signIn\\(formData\\)"
    - from: "components/auth/signup-form.tsx"
      to: "lib/validations/auth.ts"
      via: "signupSchema import"
      pattern: "import.*signupSchema"
---

<objective>
Create signup, login, and verify-email pages with form components.

Purpose: These are the primary entry points for user authentication. Users register via signup, return via login, and see the verify-email page immediately after signup while waiting for their confirmation email.

Output: Two form components (signup-form, login-form), three pages (signup, login, verify-email).
</objective>

<execution_context>
@/Users/chakaitos/.claude/get-shit-done/workflows/execute-plan.md
@/Users/chakaitos/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/02-authentication-account/02-RESEARCH.md
@.planning/phases/02-authentication-account/02-01-SUMMARY.md

@lib/validations/auth.ts
@lib/actions/auth.ts
@components/ui/form.tsx
@components/ui/input.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create signup form component and page</name>
  <files>components/auth/signup-form.tsx, app/(auth)/signup/page.tsx</files>
  <action>
Create signup form at components/auth/signup-form.tsx:

```typescript
'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { toast } from 'sonner'
import Link from 'next/link'
import { signUp } from '@/lib/actions/auth'
import { signupSchema, type SignupFormValues } from '@/lib/validations/auth'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form'

export function SignupForm() {
  const [isLoading, setIsLoading] = useState(false)

  const form = useForm<SignupFormValues>({
    resolver: zodResolver(signupSchema),
    defaultValues: {
      email: '',
      password: '',
      confirmPassword: '',
    },
  })

  async function onSubmit(data: SignupFormValues) {
    setIsLoading(true)

    const formData = new FormData()
    formData.append('email', data.email)
    formData.append('password', data.password)

    const result = await signUp(formData)

    if (result?.error) {
      toast.error(result.error)
      setIsLoading(false)
    }
    // On success, signUp redirects to /verify-email
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Email</FormLabel>
              <FormControl>
                <Input
                  type="email"
                  placeholder="you@example.com"
                  autoComplete="email"
                  disabled={isLoading}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Password</FormLabel>
              <FormControl>
                <Input
                  type="password"
                  autoComplete="new-password"
                  disabled={isLoading}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name="confirmPassword"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Confirm Password</FormLabel>
              <FormControl>
                <Input
                  type="password"
                  autoComplete="new-password"
                  disabled={isLoading}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit" className="w-full" disabled={isLoading}>
          {isLoading ? 'Creating account...' : 'Create Account'}
        </Button>
        <p className="text-center text-sm text-muted-foreground">
          Already have an account?{' '}
          <Link href="/login" className="underline underline-offset-4 hover:text-primary">
            Sign in
          </Link>
        </p>
      </form>
    </Form>
  )
}
```

Create signup page at app/(auth)/signup/page.tsx:

```typescript
import { SignupForm } from '@/components/auth/signup-form'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import Image from 'next/image'
import Link from 'next/link'

export default function SignupPage() {
  return (
    <div className="flex min-h-screen items-center justify-center p-4">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <Link href="/" className="mx-auto mb-4">
            <Image src="/logo.svg" alt="Animation Labs" width={150} height={40} priority />
          </Link>
          <CardTitle className="text-2xl">Create an account</CardTitle>
          <CardDescription>
            Enter your email below to create your account
          </CardDescription>
        </CardHeader>
        <CardContent>
          <SignupForm />
        </CardContent>
      </Card>
    </div>
  )
}
```
  </action>
  <verify>
- `npx tsc --noEmit` passes
- components/auth/signup-form.tsx exists and exports SignupForm
- app/(auth)/signup/page.tsx renders the signup page
  </verify>
  <done>Signup form validates email/password/confirm, calls signUp action, shows toast on error</done>
</task>

<task type="auto">
  <name>Task 2: Create login form component and page</name>
  <files>components/auth/login-form.tsx, app/(auth)/login/page.tsx</files>
  <action>
Create login form at components/auth/login-form.tsx:

```typescript
'use client'

import { useState } from 'react'
import { useForm } from 'react-hook-form'
import { zodResolver } from '@hookform/resolvers/zod'
import { toast } from 'sonner'
import Link from 'next/link'
import { signIn } from '@/lib/actions/auth'
import { loginSchema, type LoginFormValues } from '@/lib/validations/auth'
import { Button } from '@/components/ui/button'
import { Input } from '@/components/ui/input'
import {
  Form,
  FormControl,
  FormField,
  FormItem,
  FormLabel,
  FormMessage,
} from '@/components/ui/form'

export function LoginForm() {
  const [isLoading, setIsLoading] = useState(false)

  const form = useForm<LoginFormValues>({
    resolver: zodResolver(loginSchema),
    defaultValues: {
      email: '',
      password: '',
    },
  })

  async function onSubmit(data: LoginFormValues) {
    setIsLoading(true)

    const formData = new FormData()
    formData.append('email', data.email)
    formData.append('password', data.password)

    const result = await signIn(formData)

    if (result?.error) {
      toast.error(result.error)
      setIsLoading(false)
    }
    // On success, signIn redirects to /dashboard
  }

  return (
    <Form {...form}>
      <form onSubmit={form.handleSubmit(onSubmit)} className="space-y-4">
        <FormField
          control={form.control}
          name="email"
          render={({ field }) => (
            <FormItem>
              <FormLabel>Email</FormLabel>
              <FormControl>
                <Input
                  type="email"
                  placeholder="you@example.com"
                  autoComplete="email"
                  disabled={isLoading}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <FormField
          control={form.control}
          name="password"
          render={({ field }) => (
            <FormItem>
              <div className="flex items-center justify-between">
                <FormLabel>Password</FormLabel>
                <Link
                  href="/reset-password"
                  className="text-sm text-muted-foreground underline-offset-4 hover:underline"
                >
                  Forgot password?
                </Link>
              </div>
              <FormControl>
                <Input
                  type="password"
                  autoComplete="current-password"
                  disabled={isLoading}
                  {...field}
                />
              </FormControl>
              <FormMessage />
            </FormItem>
          )}
        />
        <Button type="submit" className="w-full" disabled={isLoading}>
          {isLoading ? 'Signing in...' : 'Sign In'}
        </Button>
        <p className="text-center text-sm text-muted-foreground">
          Don&apos;t have an account?{' '}
          <Link href="/signup" className="underline underline-offset-4 hover:text-primary">
            Sign up
          </Link>
        </p>
      </form>
    </Form>
  )
}
```

Create login page at app/(auth)/login/page.tsx:

```typescript
import { LoginForm } from '@/components/auth/login-form'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'
import Image from 'next/image'
import Link from 'next/link'

interface LoginPageProps {
  searchParams: Promise<{ message?: string }>
}

export default async function LoginPage({ searchParams }: LoginPageProps) {
  const params = await searchParams
  const message = params.message

  const messages: Record<string, string> = {
    'password-updated': 'Your password has been updated. Please sign in.',
    'password-changed': 'Your password has been changed. Please sign in again.',
  }

  return (
    <div className="flex min-h-screen items-center justify-center p-4">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <Link href="/" className="mx-auto mb-4">
            <Image src="/logo.svg" alt="Animation Labs" width={150} height={40} priority />
          </Link>
          <CardTitle className="text-2xl">Welcome back</CardTitle>
          <CardDescription>
            Enter your email to sign in to your account
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          {message && messages[message] && (
            <div className="rounded-md bg-muted p-3 text-sm text-muted-foreground">
              {messages[message]}
            </div>
          )}
          <LoginForm />
        </CardContent>
      </Card>
    </div>
  )
}
```
  </action>
  <verify>
- `npx tsc --noEmit` passes
- components/auth/login-form.tsx exists and exports LoginForm
- app/(auth)/login/page.tsx renders login page with optional message banner
  </verify>
  <done>Login form validates email/password, calls signIn action, shows toast on error, links to forgot password</done>
</task>

<task type="auto">
  <name>Task 3: Create verify-email page</name>
  <files>app/(auth)/verify-email/page.tsx</files>
  <action>
Create verify-email page at app/(auth)/verify-email/page.tsx:

```typescript
import Link from 'next/link'
import Image from 'next/image'
import { Mail } from 'lucide-react'
import { Button } from '@/components/ui/button'
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card'

export default function VerifyEmailPage() {
  return (
    <div className="flex min-h-screen items-center justify-center p-4">
      <Card className="w-full max-w-md">
        <CardHeader className="text-center">
          <Link href="/" className="mx-auto mb-4">
            <Image src="/logo.svg" alt="Animation Labs" width={150} height={40} priority />
          </Link>
          <div className="mx-auto mb-4 flex h-12 w-12 items-center justify-center rounded-full bg-primary/10">
            <Mail className="h-6 w-6 text-primary" />
          </div>
          <CardTitle className="text-2xl">Check your email</CardTitle>
          <CardDescription>
            We&apos;ve sent you a verification link. Please check your email and click the link to verify your account.
          </CardDescription>
        </CardHeader>
        <CardContent className="space-y-4">
          <div className="rounded-md bg-muted p-4 text-sm text-muted-foreground">
            <p className="font-medium">Didn&apos;t receive the email?</p>
            <ul className="mt-2 list-inside list-disc space-y-1">
              <li>Check your spam folder</li>
              <li>Make sure you entered the correct email</li>
              <li>Wait a few minutes and try again</li>
            </ul>
          </div>
          <Button variant="outline" className="w-full" asChild>
            <Link href="/login">Back to Login</Link>
          </Button>
        </CardContent>
      </Card>
    </div>
  )
}
```

This page:
- Shows immediately after signup (via redirect from signUp action)
- Displays clear instructions about checking email
- Provides helpful tips for common issues
- Links back to login for when verification is complete
  </action>
  <verify>
- `npx tsc --noEmit` passes
- app/(auth)/verify-email/page.tsx renders verification instructions
  </verify>
  <done>Verify-email page shows post-signup instructions with helpful tips</done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. Visit /signup - form renders with email, password, confirm password fields
3. Visit /login - form renders with email, password fields and forgot password link
4. Visit /verify-email - instructions page renders
5. Submit invalid data on forms - validation errors appear inline
</verification>

<success_criteria>
- components/auth/signup-form.tsx and login-form.tsx exist with react-hook-form integration
- app/(auth)/signup/page.tsx, app/(auth)/login/page.tsx, app/(auth)/verify-email/page.tsx exist
- Forms use zod schemas for validation
- Forms call server actions on submit
- Toast errors display on server action failure
- Pages include Animation Labs logo and navigation links
- `npm run build` passes
</success_criteria>

<output>
After completion, create `.planning/phases/02-authentication-account/02-03-SUMMARY.md`
</output>
